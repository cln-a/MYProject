<UserControl
    x:Class="Application.Device.ModbusDeviceView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="https://handyorg.github.io/handycontrol"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:viewmodel="clr-namespace:Application.Device"
    d:DataContext="{d:DesignInstance viewmodel:ModbusDeviceViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    prism:ViewModelLocator.AutoWireViewModel="True"
    FontFamily="Microsoft YaHei"
    TextElement.FontSize="16"
    TextElement.FontWeight="Regular"
    TextElement.Foreground="{DynamicResource MaterialDesignBody}"
    mc:Ignorable="d">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding RefreshCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <StackPanel
            Grid.Row="0"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Orientation="Horizontal" />
        <DataGrid
            x:Name="ModbusDeviceDataGrid"
            Grid.Row="1"
            Margin="0,5,0,10"
            controls:DataGridAttach.CanUnselectAllWithBlankArea="True"
            AutoGenerateColumns="False"
            CanUserAddRows="False"
            HeadersVisibility="All"
            IsReadOnly="True"
            ItemsSource="{Binding Items}"
            MinRowHeight="45"
            RowHeaderWidth="60"
            SelectionMode="Single"
            SelectionUnit="FullRow">
            <DataGrid.Resources>
                <Style TargetType="DataGridCell">
                    <Setter Property="VerticalAlignment" Value="Center" />
                    <Setter Property="HorizontalAlignment" Value="Center" />
                    <Setter Property="BorderThickness" Value="0" />
                </Style>
            </DataGrid.Resources>
            <DataGrid.RowHeaderTemplate>
                <DataTemplate>
                    <CheckBox Margin="20,0,0,0" IsChecked="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=DataGridRow}}" />
                </DataTemplate>
            </DataGrid.RowHeaderTemplate>
            <DataGrid.Columns>
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding Id}"
                    CanUserSort="True"
                    Header="序号"
                    SortMemberPath="Id" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding DeviceUri}"
                    CanUserSort="True"
                    Header="设备标识符"
                    SortMemberPath="DeviceUri" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding DeviceName}"
                    CanUserSort="True"
                    Header="设备名称"
                    SortMemberPath="DeviceName" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding RemoteIpAddress}"
                    CanUserSort="True"
                    Header="远程地址"
                    SortMemberPath="RemoteIpAddress" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding RemotePort}"
                    CanUserSort="True"
                    Header="远程端口"
                    SortMemberPath="RemotePort" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding LocalIpAddress}"
                    CanUserSort="True"
                    Header="本机地址"
                    SortMemberPath="LocalIpAddress" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding LocalPort}"
                    CanUserSort="True"
                    Header="本地端口"
                    SortMemberPath="LocalPort" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding ReconnectInterval}"
                    CanUserSort="True"
                    Header="重连周期"
                    SortMemberPath="ReconnectInterval" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding ReadInterval}"
                    CanUserSort="True"
                    Header="读取周期"
                    SortMemberPath="ReadInterval" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding DeviceBrand}"
                    CanUserSort="True"
                    Header="设备品牌"
                    SortMemberPath="DeviceBrand" />
                <DataGridCheckBoxColumn
                    Binding="{Binding IsEnabled}"
                    CanUserSort="True"
                    Header="可用"
                    SortMemberPath="IsEnabled" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding Description}"
                    CanUserSort="True"
                    Header="描述"
                    SortMemberPath="Description" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding Creator}"
                    CanUserSort="True"
                    Header="创建者"
                    SortMemberPath="Creator" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding CreateTime}"
                    CanUserSort="True"
                    Header="创建时间"
                    SortMemberPath="CreateTime" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding Updater}"
                    CanUserSort="True"
                    Header="修改者"
                    SortMemberPath="Updator" />
                <DataGridTextColumn
                    Width="Auto"
                    Binding="{Binding UpdateTime}"
                    CanUserSort="True"
                    Header="修改时间"
                    SortMemberPath="UpdateTime" />
            </DataGrid.Columns>
        </DataGrid>
        <StackPanel
            Grid.Row="2"
            Margin="0,5,0,5"
            HorizontalAlignment="Center"
            Orientation="Horizontal">
            <materialDesign:PackIcon
                Width="24"
                Height="24"
                Cursor="Hand"
                Kind="ChevronLeft" />
            <TextBlock
                Margin="10,0"
                VerticalAlignment="Center"
                Text="{Binding pageNumber, StringFormat='第{0}页'}" />
            <materialDesign:PackIcon
                Width="24"
                Height="24"
                Cursor="Hand"
                Kind="ChevronRight" />
            <TextBlock
                Margin="0,0,10,0"
                VerticalAlignment="Center"
                Text="{Binding totalPage, StringFormat='共{0}页'}" />
        </StackPanel>
    </Grid>
</UserControl>
